{"ast":null,"code":"import{useEffect,useState,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import Styles from'./BlogDetail.module.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export function BlogDetail(){const[blog,setBlog]=useState(null);const[isAuthor,setIsAuthor]=useState(false);const[error,setError]=useState(null);const{id}=useParams();const navigate=useNavigate();const fetchBlog=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/blog/\").concat(id),{headers:{'Authorization':\"Bearer \".concat(token)}});setBlog(response.data);setIsAuthor(response.data.author===localStorage.getItem('username'));console.log(\"Blog data:\",response.data);console.log(\"Is author:\",response.data.author===localStorage.getItem('username'));}catch(error){console.error('Error fetching blog:',error);setError('Error fetching blog');}},[id]);useEffect(()=>{fetchBlog();},[fetchBlog]);const handleDelete=async()=>{try{const token=localStorage.getItem('token');await axios.delete(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/blog/\").concat(id),{headers:{'Authorization':\"Bearer \".concat(token)}});navigate('/blogs');}catch(error){console.error('Error deleting blog:',error);setError('Error deleting blog');}};const handleEdit=()=>{navigate(\"/edit-blog/\".concat(id));};if(error)return/*#__PURE__*/_jsxs(\"div\",{className:Styles.error,children:[\"Error: \",error]});if(!blog)return/*#__PURE__*/_jsx(\"div\",{className:Styles.loading,children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:Styles.blogDetailContainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:blog.title}),/*#__PURE__*/_jsxs(\"p\",{className:Styles.author,children:[\"By \",blog.author||'Unknown']}),/*#__PURE__*/_jsx(\"p\",{className:Styles.description,children:blog.description}),isAuthor&&/*#__PURE__*/_jsxs(\"div\",{className:Styles.authorActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"})]})]});}","map":{"version":3,"names":["useEffect","useState","useCallback","useParams","useNavigate","axios","Styles","jsxs","_jsxs","jsx","_jsx","BlogDetail","blog","setBlog","isAuthor","setIsAuthor","error","setError","id","navigate","fetchBlog","token","localStorage","getItem","response","get","concat","process","env","REACT_APP_SERVER_URL","headers","data","author","console","log","handleDelete","delete","handleEdit","className","children","loading","blogDetailContainer","title","description","authorActions","onClick"],"sources":["C:/Users/Sreeyas/OneDrive/Desktop/Blogging Application/client/src/Views/Blogs/BlogDetail.js"],"sourcesContent":["import { useEffect, useState, useCallback } from 'react'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport Styles from './BlogDetail.module.css'\r\n\r\nexport function BlogDetail() {\r\n    const [blog, setBlog] = useState(null)\r\n    const [isAuthor, setIsAuthor] = useState(false)\r\n    const [error, setError] = useState(null)\r\n    const { id } = useParams()\r\n    const navigate = useNavigate()\r\n\r\n    const fetchBlog = useCallback(async () => {\r\n        try {\r\n            const token = localStorage.getItem('token')\r\n            const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/api/blog/${id}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            setBlog(response.data)\r\n            setIsAuthor(response.data.author === localStorage.getItem('username'))\r\n            console.log(\"Blog data:\", response.data)\r\n            console.log(\"Is author:\", response.data.author === localStorage.getItem('username'))\r\n        } catch (error) {\r\n            console.error('Error fetching blog:', error)\r\n            setError('Error fetching blog')\r\n        }\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        fetchBlog()\r\n    }, [fetchBlog])\r\n\r\n    const handleDelete = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token')\r\n            await axios.delete(`${process.env.REACT_APP_SERVER_URL}/api/blog/${id}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            navigate('/blogs')\r\n        } catch (error) {\r\n            console.error('Error deleting blog:', error)\r\n            setError('Error deleting blog')\r\n        }\r\n    }\r\n\r\n    const handleEdit = () => {\r\n        navigate(`/edit-blog/${id}`)\r\n    }\r\n\r\n    if (error) return <div className={Styles.error}>Error: {error}</div>\r\n    if (!blog) return <div className={Styles.loading}>Loading...</div>\r\n\r\n    return (\r\n        <div className={Styles.blogDetailContainer}>\r\n            <h1>{blog.title}</h1>\r\n            <p className={Styles.author}>By {blog.author || 'Unknown'}</p>\r\n            <p className={Styles.description}>{blog.description}</p>\r\n            {isAuthor && (\r\n                <div className={Styles.authorActions}>\r\n                    <button onClick={handleEdit}>Edit</button>\r\n                    <button onClick={handleDelete}>Delete</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}