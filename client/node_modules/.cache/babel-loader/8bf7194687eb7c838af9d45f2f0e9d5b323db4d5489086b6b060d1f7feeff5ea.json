{"ast":null,"code":"import{BrowserRouter,Routes,Route,Link,Outlet,useLocation}from'react-router-dom';import{useState,useEffect}from'react';import MyURLs from'./Routes/Routes';import Styles from'./Layout.module.css';import{ProtectedRoute}from'./Components/ProtectedRoute';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function MyRoutes(props){return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Layout,{}),children:MyURLs.map((view,index)=>/*#__PURE__*/_jsx(Route,{path:view.path,element:view.path==='/blogs'?/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(view.view,{})}):/*#__PURE__*/_jsx(view.view,{})},view.path))})})});}export default function Layout(props){const[username,setUsername]=useState('');const location=useLocation();useEffect(()=>{const storedUsername=localStorage.getItem('username');if(storedUsername){setUsername(storedUsername);}},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('username');setUsername('');window.location.href='/auth';};const isViewingBlog=location.pathname.startsWith('/blog/');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{className:Styles.header,children:[/*#__PURE__*/_jsx(\"span\",{children:\"My BLOG App\"}),/*#__PURE__*/_jsx(\"div\",{className:Styles.headerLinks,children:username?/*#__PURE__*/_jsxs(_Fragment,{children:[isViewingBlog&&/*#__PURE__*/_jsx(Link,{to:\"/blogs\",className:Styles.navLink,children:\"Back to Blogs\"}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.userGreeting,children:[\"Hello, \",username,\"!\",/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:Styles.logoutButton,children:\"Logout\"})]})]}):/*#__PURE__*/_jsx(Link,{to:\"/\",className:Styles.navLink,children:\"Sign In / Sign Up\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:Styles.primaryContainer,children:/*#__PURE__*/_jsx(Outlet,{})})]});}","map":{"version":3,"names":["BrowserRouter","Routes","Route","Link","Outlet","useLocation","useState","useEffect","MyURLs","Styles","ProtectedRoute","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyRoutes","props","children","path","element","Layout","map","view","index","username","setUsername","location","storedUsername","localStorage","getItem","handleLogout","removeItem","window","href","isViewingBlog","pathname","startsWith","className","header","headerLinks","to","navLink","userGreeting","onClick","logoutButton","primaryContainer"],"sources":["C:/Users/Sreeyas/OneDrive/Desktop/Blogging Application/client/src/Layout.js"],"sourcesContent":["import { BrowserRouter, Routes, Route, Link, Outlet, useLocation } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react'\r\nimport MyURLs from './Routes/Routes';\r\nimport Styles from './Layout.module.css';\r\nimport { ProtectedRoute } from './Components/ProtectedRoute';\r\n\r\nexport function MyRoutes(props) {\r\n    return (\r\n        <BrowserRouter>\r\n            <Routes>\r\n                <Route path='/' element={<Layout />}>\r\n                    {MyURLs.map((view, index) => (\r\n                        <Route \r\n                            key={view.path} \r\n                            path={view.path} \r\n                            element={\r\n                                view.path === '/blogs' ? (\r\n                                    <ProtectedRoute>\r\n                                        <view.view />\r\n                                    </ProtectedRoute>\r\n                                ) : (\r\n                                    <view.view />\r\n                                )\r\n                            } \r\n                        />\r\n                    ))}\r\n                </Route>\r\n            </Routes>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default function Layout(props) {\r\n    const [username, setUsername] = useState('');\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const storedUsername = localStorage.getItem('username');\r\n        if (storedUsername) {\r\n            setUsername(storedUsername);\r\n        }\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('username');\r\n        setUsername('');\r\n        window.location.href = '/auth';\r\n    };\r\n\r\n    const isViewingBlog = location.pathname.startsWith('/blog/');\r\n\r\n    return (\r\n        <>\r\n            <nav className={Styles.header}>\r\n                <span>\r\n                    My BLOG App\r\n                </span>\r\n                <div className={Styles.headerLinks}>\r\n                    {username ? (\r\n                        <>\r\n                            {isViewingBlog && (\r\n                                <Link to=\"/blogs\" className={Styles.navLink}>Back to Blogs</Link>\r\n                            )}\r\n                            <div className={Styles.userGreeting}>\r\n                                Hello, {username}!\r\n                                <button onClick={handleLogout} className={Styles.logoutButton}>Logout</button>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <Link to=\"/\" className={Styles.navLink}>Sign In / Sign Up</Link>\r\n                    )}\r\n                </div>\r\n            </nav>\r\n            <div className={Styles.primaryContainer}>\r\n                <Outlet />\r\n            </div>\r\n        </>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}