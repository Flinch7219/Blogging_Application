{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import axios from'axios';import Styles from'./EditBlog.module.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export function EditBlog(){const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[error,setError]=useState(null);const{id}=useParams();const navigate=useNavigate();useEffect(()=>{const fetchBlog=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/blog/\").concat(id),{headers:{'Authorization':\"Bearer \".concat(token)}});setTitle(response.data.title);setDescription(response.data.description);}catch(error){console.error('Error fetching blog:',error);setError('Error fetching blog');}};fetchBlog();},[id]);const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');await axios.patch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/blog/\").concat(id),{title,description},{headers:{'Authorization':\"Bearer \".concat(token)}});navigate(\"/blog/\".concat(id));}catch(error){console.error('Error updating blog:',error);setError('Error updating blog');}};const handleCancel=()=>{navigate(\"/blog/\".concat(id));};if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(\"div\",{className:Styles.editBlogContainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Blog\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),placeholder:\"Title\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Description\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.buttonContainer,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:Styles.cancelButton,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Blog\"})]})]})]});}","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","Link","axios","Styles","jsxs","_jsxs","jsx","_jsx","EditBlog","title","setTitle","description","setDescription","error","setError","id","navigate","fetchBlog","token","localStorage","getItem","response","get","concat","process","env","REACT_APP_SERVER_URL","headers","data","console","handleSubmit","e","preventDefault","patch","handleCancel","children","className","editBlogContainer","onSubmit","type","value","onChange","target","placeholder","required","buttonContainer","onClick","cancelButton"],"sources":["C:/Users/Sreeyas/OneDrive/Desktop/Blogging Application/client/src/Views/Blogs/EditBlog.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useParams, useNavigate, Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport Styles from './EditBlog.module.css'\r\n\r\nexport function EditBlog() {\r\n    const [title, setTitle] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [error, setError] = useState(null)\r\n    const { id } = useParams()\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        const fetchBlog = async () => {\r\n            try {\r\n                const token = localStorage.getItem('token')\r\n                const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/api/blog/${id}`, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`\r\n                    }\r\n                })\r\n                setTitle(response.data.title)\r\n                setDescription(response.data.description)\r\n            } catch (error) {\r\n                console.error('Error fetching blog:', error)\r\n                setError('Error fetching blog')\r\n            }\r\n        }\r\n        fetchBlog()\r\n    }, [id])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        try {\r\n            const token = localStorage.getItem('token')\r\n            await axios.patch(`${process.env.REACT_APP_SERVER_URL}/api/blog/${id}`, \r\n                { title, description },\r\n                {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`\r\n                    }\r\n                }\r\n            )\r\n            navigate(`/blog/${id}`)\r\n        } catch (error) {\r\n            console.error('Error updating blog:', error)\r\n            setError('Error updating blog')\r\n        }\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        navigate(`/blog/${id}`)\r\n    }\r\n\r\n    if (error) return <div>Error: {error}</div>\r\n\r\n    return (\r\n        <div className={Styles.editBlogContainer}>\r\n            <h1>Edit Blog</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    placeholder=\"Title\"\r\n                    required\r\n                />\r\n                <textarea\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    placeholder=\"Description\"\r\n                    required\r\n                />\r\n                <div className={Styles.buttonContainer}>\r\n                    <button type=\"button\" onClick={handleCancel} className={Styles.cancelButton}>Cancel</button>\r\n                    <button type=\"submit\">Update Blog</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}