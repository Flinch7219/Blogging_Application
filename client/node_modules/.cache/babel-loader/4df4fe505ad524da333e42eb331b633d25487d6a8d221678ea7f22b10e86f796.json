{"ast":null,"code":"import{useState}from'react';import{useNavigate}from'react-router-dom';import Styles from'./AUTH.module.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function AUTH(){const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[email,setEmail]=useState('');const[isLogin,setIsLogin]=useState(true);const[message,setMessage]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();const url=isLogin?\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/login\"):\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/register\");console.log(\"Sending request to: \",url);const data=isLogin?{username,password}:{email,username,password};try{const response=await axios.post(url,data,{headers:{accept:\"application/json\"}});console.log(response.data);if(isLogin){if(response.data.token){localStorage.setItem('token',response.data.token);localStorage.setItem('username',username);setMessage(\"Login successful! Redirecting...\");setTimeout(()=>{navigate('/blogs');window.location.reload();},1500);}}else{setMessage(\"Registration successful! Please log in.\");setIsLogin(true);setUsername('');setPassword('');setEmail('');}}catch(error){var _error$response,_error$response$data;console.log(error);setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"An error occurred\");}};return/*#__PURE__*/_jsxs(\"div\",{className:Styles.ancestorContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:Styles.headerContainer,children:/*#__PURE__*/_jsx(\"h1\",{children:isLogin?\"Login\":\"Register\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:Styles.authContainer,children:[!isLogin&&/*#__PURE__*/_jsx(\"input\",{className:Styles.authInput,type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{className:Styles.authInput,type:\"text\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{className:Styles.authInput,type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:Styles.addButton,children:isLogin?\"Login\":\"Register\"})]}),/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setIsLogin(!isLogin);setMessage('');setUsername('');setPassword('');setEmail('');},className:Styles.addButton,children:isLogin?\"Need to register?\":\"Already have an account?\"})]});}","map":{"version":3,"names":["useState","useNavigate","Styles","axios","jsx","_jsx","jsxs","_jsxs","AUTH","username","setUsername","password","setPassword","email","setEmail","isLogin","setIsLogin","message","setMessage","navigate","handleSubmit","e","preventDefault","url","concat","process","env","REACT_APP_SERVER_URL","console","log","data","response","post","headers","accept","token","localStorage","setItem","setTimeout","window","location","reload","error","_error$response","_error$response$data","className","ancestorContainer","children","headerContainer","onSubmit","authContainer","authInput","type","placeholder","value","onChange","target","required","addButton","onClick"],"sources":["C:/Users/Sreeyas/OneDrive/Desktop/Blogging Application/client/src/Views/AUTH/AUTH.js"],"sourcesContent":["import { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Styles from './AUTH.module.css'\r\nimport axios from 'axios'\r\n\r\nexport function AUTH() {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [isLogin, setIsLogin] = useState(true)\r\n    const [message, setMessage] = useState('')\r\n    const navigate = useNavigate()\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        const url = isLogin \r\n            ? `${process.env.REACT_APP_SERVER_URL}/api/login`\r\n            : `${process.env.REACT_APP_SERVER_URL}/api/register`\r\n        \r\n        console.log(\"Sending request to: \", url);\r\n        const data = isLogin \r\n            ? { username, password }\r\n            : { email, username, password }\r\n\r\n        try {\r\n            const response = await axios.post(url, data, {\r\n                headers: { accept: \"application/json\" }\r\n            })\r\n            console.log(response.data)\r\n            if (isLogin) {\r\n                if (response.data.token) {\r\n                    localStorage.setItem('token', response.data.token)\r\n                    localStorage.setItem('username', username)\r\n                    setMessage(\"Login successful! Redirecting...\")\r\n                    setTimeout(() => {\r\n                        navigate('/blogs')\r\n                        window.location.reload()\r\n                    }, 1500)\r\n                }\r\n            } else {\r\n                setMessage(\"Registration successful! Please log in.\")\r\n                setIsLogin(true)\r\n                setUsername('')\r\n                setPassword('')\r\n                setEmail('')\r\n            }\r\n        } catch (error) {\r\n            console.log(error)\r\n            setMessage(error.response?.data?.message || \"An error occurred\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={Styles.ancestorContainer}>\r\n            <div className={Styles.headerContainer}>\r\n                <h1>{isLogin ? \"Login\" : \"Register\"}</h1>\r\n            </div>\r\n            <form onSubmit={handleSubmit} className={Styles.authContainer}>\r\n                {!isLogin && (\r\n                    <input\r\n                        className={Styles.authInput}\r\n                        type='email'\r\n                        placeholder='Email'\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        required\r\n                    />\r\n                )}\r\n                <input\r\n                    className={Styles.authInput}\r\n                    type='text'\r\n                    placeholder='Username'\r\n                    value={username}\r\n                    onChange={(e) => setUsername(e.target.value)}\r\n                    required\r\n                />\r\n                <input\r\n                    className={Styles.authInput}\r\n                    type='password'\r\n                    placeholder='Password'\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                />\r\n                <button type=\"submit\" className={Styles.addButton}>\r\n                    {isLogin ? \"Login\" : \"Register\"}\r\n                </button>\r\n            </form>\r\n            <p>{message}</p>\r\n            <button onClick={() => {\r\n                setIsLogin(!isLogin)\r\n                setMessage('')\r\n                setUsername('')\r\n                setPassword('')\r\n                setEmail('')\r\n            }} className={Styles.addButton}>\r\n                {isLogin ? \"Need to register?\" : \"Already have an account?\"}\r\n            </button>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}